# HTTPS
## HTTP的缺点
-   通信使用明文，可能会被窃听
-   没有验证对方身份，可能会被伪装
-   无法证明报文的完整新，可能会被篡改
## HTTPS与HTTP的区别
-   HTTP是明文传输，HTTPS 通过 SSL\TLS 进行了加密  
-   HTTP 的端口号是 80，HTTPS 是 443  
-   HTTPS 需要到 CA 申请证书，一般免费证书很少，需要交费  
-   HTTPS 的连接很简单，是无状态的；HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。  

## 主要用处
-   建立一个信息安全通道，来保证数据传输的安全  
-   确认网站的真实性，防止钓鱼网站  

## SSL
### 对称加密
加密和解密用的是同一个密钥，密钥传输传输过程中仍有可能被窃取。  

### 非对称加密RSA
而是有一对儿钥匙， 一个是保密的，称为私钥，另外一个是公开的，称为公钥。公钥加密，密钥解密  

### 混合加密
使用RSA的方式发送解密密钥，随后使用对称加密  

### 中间人攻击
中间人截取公钥的传输，同时向两方伪装信息。    
防御方式：使用第三方公证书来保护公钥的传输，公证书用于证明一个人的身份，

### 第三方数字机构
-   证书包含一个人的信息以及公钥，将公钥以及个人信息用一个HASH算法生成一个消息摘要，Hash算法有个极好的特性，只要输入数据有一点点变化，那生成的消息摘要就会有巨变，这样就可以防止别人修改原始内容。   
-   为了防止攻击者完全替换消息摘要，还要利用认证中心提供的私钥对消息摘要加密成数字签名。  
-   将原始信息和数字签名合并，形成了一个全新的东西，叫做数据证书   
-   另一端收到证书之后，使用CA提供的密钥对数字签名进行解密，得到消息摘要，再与自己使用hash算法生成的消息摘要进行比较，可以得出是否有人篡改。  

### 防止传输CA公钥的中间人攻击
信任CA，通过安全的的方式获取他们的公钥。这些ＣＡ本身也有证书来证明自己的身份，并且ＣＡ的信用是像树一样分级的，高层的ＣＡ给底层的ＣＡ做信用背书，而操作系统／浏览器中会内置一些顶层的ＣＡ的证书，相当于你自动信任了他们。　这些顶层的ＣＡ证书一定得安全地放入操作系统／浏览器当中，否则世界大乱。  

###  https流程图
-   浏览器发出安全请求(https...)  
-   服务器发送数字证书(包含服务器的public key)  
-   浏览器用预置的CA列表验证证书，如有问题，则提示有风险  
-   浏览器生产随机的对称密钥，用服务器的public key加密  
-   服务器用自己的private key进行解密，得到对称密钥  
-   双发都知道了对称密钥，用它来进行加密通信  




