# CSRF攻击  
跨站点请求伪造。对已经完成认证的用户，进行非预期的操作。攻击者盗用了你的身份，以你的名义发送恶意请求。CSRF能够做的事情包括：以你名义发送邮件，发消息，盗取你的账号，甚至于购买商品，虚拟货币转账......造成的问题包括：个人隐私泄露以及财产安全。
## 攻击方式
1. 用户通过浏览器，访问正常网站A（例如某银行），通过用户的身份认证（比如用户名/密码）成功A网站。  
2. 网站A产生Cookie信息并返回给用户的浏览器；   
3. 用户保持A网站页面登录状态，在同一浏览器中，打开一个新的TAB页访问恶意网站B；  
4. 网站B接收到用户请求后，返回一些攻击性代码，请求A网站的资源（例如转账请求）；  
5. 浏览器执行恶意代码，在用户不知情的情况下携带Cookie信息，向网站A发出请求。  
6. 网站A根据用户的Cookie信息核实用户身份（此时用户在A网站是已登录状态），A网站会处理该请求，导致来自网站B的恶意请求被执行。

## 攻击技巧
-   使用img src发起get请求  
-   使用iframe嵌表单发送POST请求

## 防御
1.  服务器端进行CSRF防御  
服务端的CSRF方式方法很多样，但总的思想都是一致的，就是在客户端页面增加伪随机数。  
-   Cookie Hashing(所有表单都包含同一个伪随机值)：客户端送一串基于cookie的hash值，服务器端再进行验证，确定是用户主动发送的  
-   验证码  
-   One-Time Tokens(不同的表单包含一个不同的伪随机值)

## 参考
[浅谈CSRF攻击](http://www.cnblogs.com/hyddd/archive/2009/04/09/1432744.html)  
